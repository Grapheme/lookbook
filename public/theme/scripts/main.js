window.LookBook={},window.Help={},window.jQuery.fn.autosize=function(){return autosize(this)},Help.avaGenerator=function(){var e=$("[data-empty-name]");e.length&&e.each(function(){var e=$(this).attr("data-empty-name"),t=e.split(" "),o="";$.each(t,function(e,t){o+=t.charAt(0)}),$(this).find(".js-empty-chars").html(o)})},Help.typicalSubmit=function(){$(document).on("submit",".js-ajax-form",function(e){var t=$(this);return Help.ajaxSubmit(t),e.preventDefault(),!1})},Help.ajaxSubmit=function(e){var t=$(e).find(".js-response-text"),o={beforeSubmit:function(){t.hide(),$(e).find('[type="submit"]').addClass("loading").attr("disabled","disabled")},success:function(o){o.status&&o.redirect&&""!=o.redirect&&(window.location.href=o.redirect),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled"),$(e).hasClass("js-reg-form")?($(".js-full-reg").slideUp(),$(".js-final-text").html(o.responseText)):o.responseText&&t.show().html(o.responseText)},error:function(){t.show().text("Ошибка на сервере, попробуйте позже"),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled")}};$(e).ajaxSubmit(o)},Help.avaSubmit=function(e,t){var o=$("#ava-error-server"),a={beforeSubmit:function(){o.hide(),o.text("Загрузка...")},success:function(e){e.responseText&&o.show().text(e.responseText),t(e)},error:function(){o.show().text("Ошибка на сервере, попробуйте позже")}};$(e).ajaxSubmit(a)},jQuery.extend(jQuery.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корретный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пароли не совпадают",accept:"Пожалуйста, выберите файл с правильным расширением.",maxlength:jQuery.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:jQuery.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:jQuery.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:jQuery.validator.format("Пожалуйста, введите число от {0} до {1}."),max:jQuery.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:jQuery.validator.format("Пожалуйста, введите число, большее или равное {0}."),extension:jQuery.validator.format("Вы можете загрузить изображение только со следующими расширениями: jpeg, jpg, png, gif.")}),LookBook.ActionButton=function(){$(".js-action-btn").length&&$(".js-action-btn").on("submit",function(e){e.preventDefault();var t=$(this),o=t.find('[type="submit"]'),a={beforeSubmit:function(){o.addClass("loading")},success:function(e){e.responseText&&o.text(e.responseText),o.removeClass("loading").attr("disabled","disabled")},error:function(){o.text("Ошибка на сервере").removeClass("loading")}};return $(t).ajaxSubmit(a),!1})},LookBook.Dashboard=function(){var e=function(e){var t=e.parents(".js-post"),o={beforeSubmit:function(){t.addClass("opacity05"),$(e).find('[type="submit"]').attr("disabled","disabled")},success:function(e){e.status?t.slideUp():console.log(e)},error:function(o){t.removeClass("opacity05"),$(e).find('[type="submit"]').removeAttr("disabled"),console.log(o)}};e.ajaxSubmit(o)},t=function(e){var t=e.find(".js-response-text"),o=$(".js-posts"),a={beforeSubmit:function(){t.hide(),e.find('[type="submit"]').addClass("loading").attr("disabled","disabled")},success:function(t){console.log(o),o.append(t.html),t.hide_button&&e.hide(),$("#js-input-from").val(t.from),e.find('[type="submit"]').removeClass("loading").removeAttr("disabled")},error:function(){t.show().text("Ошибка на сервере, попробуйте позже"),e.find('[type="submit"]').removeClass("loading").removeAttr("disabled")}};e.ajaxSubmit(a)};$(document).on("submit",".js-delete-post",function(){return e($(this)),!1}),$(document).on("submit",".js-more-posts",function(){return t($(this)),!1})},LookBook.DashForm=function(){var e=$(".js-dashboard-form");if(e.length){var t=$(".js-form-value"),o=function(e){var t=e.parents(".js-form-value");t.find("input").trigger("focus")},a=function(e){var t=e.parents(".js-form-value");t.addClass("focus-value")},i=function(e){var t=e.parents(".js-form-value");t.removeClass("focus-value"),n()},n=function(){t.each(function(){var e=$(this),t=$(this).find("input");""==t.val()?e.addClass("empty-value"):e.removeClass("empty-value")})},s=function(){n(),$(document).on("click",".js-add-value",function(){return o($(this)),!1}),t.find("input").on("focus",function(){a($(this))}),t.find("input").on("focusout",function(){i($(this))}),$("a").on("focus",function(){$(this).parents(".js-form-value").length&&o($(this))}),$("#dashboard-main").validate({rules:{name:{required:!0},email:{required:!0,email:!0}},errorPlacement:function(e,t){t.parents("tr").addClass("error")},success:function(e,t){$(t).parents("tr").removeClass("error")},submitHandler:function(e){return Help.ajaxSubmit(e),!1}}),$("#dashboard-pass").validate({rules:{password:{required:!0,minlength:6},password_confirmation:{required:!0,equalTo:"#dashboard-pass [name='password']"}},errorPlacement:function(e,t){t.parents("tr").addClass("error")},success:function(e,t){$(t).parents("tr").removeClass("error")},submitHandler:function(e){return Help.ajaxSubmit(e),!1}});var e=["#ava-upload","#ava-change"];$.each(e,function(e,t){$(t).find('input[type="file"]').on("change",function(){$("#ava-error-server").html(""),$(this).parents(t).trigger("submit")})}),$("#ava-delete").find(".js-submit").on("click",function(){$("#ava-error-server").html(""),$(this).parents("#ava-delete").trigger("submit")}),$("#ava-change").validate({rules:{photo:{required:!0,extension:"jpg|jpeg|png|gif"}},errorElement:"div",errorLabelContainer:"#ava-error-cont",submitHandler:function(e){return Help.avaSubmit(e,function(e){$(".js-ava-cont").removeClass("ava-empty"),$(".js-ava-img-cont").html('<img src="'+e.image+'" alt="">')}),!1}}),$("#ava-upload").validate({rules:{photo:{required:!0,extension:"jpg|jpeg|png|gif"}},errorElement:"div",errorLabelContainer:"#ava-error-cont",submitHandler:function(e){return Help.avaSubmit(e,function(e){$(".js-ava-cont").removeClass("ava-empty"),$(".js-ava-img-cont").html('<img src="'+e.image+'" alt="">')}),!1}}),$("#ava-delete").validate({rules:{},errorElement:"div",errorLabelContainer:"#ava-error-cont",submitHandler:function(e){return Help.avaSubmit(e,function(){$(".js-ava-cont").addClass("ava-empty"),$(".js-ava-img-cont").html("")}),!1}})};s()}},LookBook.FitText=function(){$.fn.fitText=function(){for(var e=$(this).parents(".js-fit-parent"),t=$(this);t.width()>e.width();){var o=parseInt(t.css("font-size"))-1+"px";t.css({"font-size":o})}},$(".js-fit-text").fitText()},LookBook.Auth=function(){var e=this,t=$(".js-overlay"),o=t.find(".overlay__background"),a=t.find("[data-popup]"),i=$(".js-close-popup"),n=500;this.show=function(e){var i=a.filter('[data-popup="'+e+'"]');i.length&&(i.siblings().removeClass("active").hide(),t.show(),$("html").addClass("locked"),setTimeout(function(){o.addClass("active"),i.show(),setTimeout(function(){i.addClass("active")},50)},50))},this.close=function(){window.location.hash="",a.removeClass("active"),o.removeClass("active"),$("html").removeClass("locked"),setTimeout(function(){a.hide(),t.hide()},n)},this.hashOpen=function(){var t=window.location.hash.substring(1);""!=t&&e.show(t)},i.on("click",function(){return e.close(),!1}),$(window).on("hashchange",function(){e.hashOpen()}),this.hashOpen(),$("#form-auth").validate({rules:{login:{required:!0,email:!0},password:{required:!0}},submitHandler:function(e){return Help.ajaxSubmit(e),!1}}),$("#form-reg").validate({rules:{email:{required:!0,email:!0},password:{required:!0,minlength:6},password_verify:{required:!0,equalTo:"#form-reg [name='password']"},name:{required:!0}},submitHandler:function(e){return Help.ajaxSubmit(e),!1}}),$("#form-restore_before").validate({rules:{email:{required:!0,email:!0}},submitHandler:function(e){return Help.ajaxSubmit(e),!1}}),$("#form-restore").validate({rules:{password:{required:!0,minlength:6},password_confirmation:{required:!0,equalTo:"#form-restore [name='password']"}},submitHandler:function(e){return Help.ajaxSubmit(e),!1}})},LookBook.TopSplit=function(){if($(".js-top-split").length){for(var e=$(".js-top-split >li"),t=[],o=6,a=0;a<e.length/o;a++){var i=$(),n=a*o;for(j=n;j<n+o;j++)e.eq(j).length&&i.push(e.eq(j)[0]);t.push(i)}$.each(t,function(e,t){t.wrapAll('<ul class="posts-slider js-list-slide clearfix" />')}),$(".js-top-split").css("height",$(".js-top-split .posts-slider").first().outerHeight(!0))}},LookBook.ListSlider=function(){$(".js-list-slider").length&&$(".js-list-slider").each(function(){var e=$(this),t=e.find(".js-list-slide"),o=e.find(".js-list-dots"),a=["to-left","to-right","out-left","out-right"],i=function(o){var i=t.eq(o);e.find(".js-list-dot").eq(o).addClass("active").siblings().removeClass("active"),t.removeClass(a.join(" ")),i.prev().addClass("to-left").prevAll().addClass("out-left"),i.next().addClass("to-right").nextAll().addClass("out-right")},n=function(){t.on("click",function(){return $(this).hasClass("to-right")||$(this).hasClass("to-left")?(i($(this).index()),!1):void 0}),e.find(".js-list-dot").on("click",function(){return i($(this).index()),!1})},s=function(){t.length>1?(t.each(function(){o.append('<a href="#" class="nav__dot js-list-dot"></a>')}),setTimeout(function(){t.addClass("with-transition")},50)):o.remove(),i(0),n()};s()})},LookBook.DatePicker=function(){$(".js-datepicker").datepicker()},LookBook.Like=function(){var e=function(e){var t=e.attr("data-action");$.ajax({url:t,type:"post",dataType:"json"}).done(function(e){console.log(e)}).fail(function(e){console.log(e)})},t=function(){$(document).on("click",".js-like",function(){return e($(this)),!1})};t()},$(function(){Help.avaGenerator(),Help.typicalSubmit(),LookBook.Dashboard(),LookBook.DatePicker(),LookBook.TopSplit(),LookBook.ListSlider(),LookBook.DashForm(),LookBook.FitText(),LookBook.Auth(),LookBook.Like(),LookBook.ActionButton(),$(".js-autosize").autosize(),$(".js-styled-select").selectmenu()});