window.LookBook={},LookBook.Auth=function(){var e=this,r=$(".js-overlay"),a=r.find(".overlay__background"),t=r.find("[data-popup]"),i=$(".js-close-popup"),o=500;this.show=function(e){var i=t.filter('[data-popup="'+e+'"]');i.length&&(i.siblings().removeClass("active").hide(),r.show(),$("html").addClass("locked"),setTimeout(function(){a.addClass("active"),i.show(),setTimeout(function(){i.addClass("active")},50)},50))},this.close=function(){window.location.hash="",t.removeClass("active"),a.removeClass("active"),$("html").removeClass("locked"),setTimeout(function(){t.hide(),r.hide()},o)},this.hashOpen=function(){var r=window.location.hash.substring(1);""!=r&&e.show(r)},i.on("click",function(){return e.close(),!1}),$(window).on("hashchange",function(){e.hashOpen()}),this.hashOpen(),jQuery.extend(jQuery.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корретный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пароли не совпадают",accept:"Пожалуйста, выберите файл с правильным расширением.",maxlength:jQuery.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:jQuery.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:jQuery.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:jQuery.validator.format("Пожалуйста, введите число от {0} до {1}."),max:jQuery.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:jQuery.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),$("#form-auth").validate({rules:{login:{required:!0,email:!0},password:{required:!0}},submitHandler:function(r){return e.ajaxSubmit(r),!1}}),$("#form-reg").validate({rules:{email:{required:!0,email:!0},password:{required:!0,minlength:6},password_verify:{required:!0,equalTo:"#form-reg [name='password']"},name:{required:!0}},submitHandler:function(r){return e.ajaxSubmit(r),!1}}),$("#form-restore_before").validate({rules:{email:{required:!0,email:!0}},submitHandler:function(r){return e.ajaxSubmit(r),!1}}),$("#form-restore").validate({rules:{password:{required:!0,minlength:6},password_confirmation:{required:!0,equalTo:"#form-restore [name='password']"}},submitHandler:function(r){return e.ajaxSubmit(r),!1}}),this.ajaxSubmit=function(e){var r=$(e).find(".js-response-text"),a={beforeSubmit:function(){r.hide(),$(e).find('[type="submit"]').addClass("loading").attr("disabled","disabled")},success:function(a){a.status&&a.redirect&&""!=a.redirect&&(window.location.href=a.redirect),a.responseText&&r.show().text(a.responseText),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled")},error:function(){r.show().text("Ошибка на сервере, попробуйте позже"),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled")}};$(e).ajaxSubmit(a)}},$(function(){LookBook.Auth()});